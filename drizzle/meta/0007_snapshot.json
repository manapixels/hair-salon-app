{
  "id": "bbc6e55c-46e7-4581-9512-ca2b3c389c49",
  "prevId": "1f1c840a-0c96-4b01-bbfc-27a0a26e9b22",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.admin_settings": {
      "name": "admin_settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "weeklySchedule": {
          "name": "weeklySchedule",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"monday\":{\"isOpen\":true,\"openingTime\":\"11:00\",\"closingTime\":\"19:00\"},\"tuesday\":{\"isOpen\":false,\"openingTime\":\"11:00\",\"closingTime\":\"19:00\"},\"wednesday\":{\"isOpen\":true,\"openingTime\":\"11:00\",\"closingTime\":\"19:00\"},\"thursday\":{\"isOpen\":true,\"openingTime\":\"11:00\",\"closingTime\":\"19:00\"},\"friday\":{\"isOpen\":true,\"openingTime\":\"11:00\",\"closingTime\":\"19:00\"},\"saturday\":{\"isOpen\":true,\"openingTime\":\"11:00\",\"closingTime\":\"19:00\"},\"sunday\":{\"isOpen\":true,\"openingTime\":\"11:00\",\"closingTime\":\"19:00\"}}'::json"
        },
        "closedDates": {
          "name": "closedDates",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::json"
        },
        "blockedSlots": {
          "name": "blockedSlots",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::json"
        },
        "businessName": {
          "name": "businessName",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Signature Trims Hair Salon'"
        },
        "businessAddress": {
          "name": "businessAddress",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'930 Yishun Avenue 1 #01-127, Singapore 760930'"
        },
        "businessPhone": {
          "name": "businessPhone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'(555) 123-4567'"
        },
        "depositEnabled": {
          "name": "depositEnabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "depositPercentage": {
          "name": "depositPercentage",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 15
        },
        "depositTrustThreshold": {
          "name": "depositTrustThreshold",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "depositRefundWindowHours": {
          "name": "depositRefundWindowHours",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 24
        },
        "socialLinks": {
          "name": "socialLinks",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"instagram\":{\"url\":\"\",\"isActive\":false},\"facebook\":{\"url\":\"\",\"isActive\":false},\"whatsapp\":{\"url\":\"\",\"isActive\":false},\"telegram\":{\"url\":\"\",\"isActive\":false}}'::json"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.appointments": {
      "name": "appointments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "date": {
          "name": "date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "time": {
          "name": "time",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "categoryId": {
          "name": "categoryId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "estimatedDuration": {
          "name": "estimatedDuration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "services": {
          "name": "services",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "totalPrice": {
          "name": "totalPrice",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "totalDuration": {
          "name": "totalDuration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "stylistId": {
          "name": "stylistId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customerName": {
          "name": "customerName",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customerEmail": {
          "name": "customerEmail",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "calendarEventId": {
          "name": "calendarEventId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "AppointmentStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'SCHEDULED'"
        },
        "completedAt": {
          "name": "completedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "feedbackSent": {
          "name": "feedbackSent",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "bookingSource": {
          "name": "bookingSource",
          "type": "BookingSource",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'WEB'"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "appointments_categoryId_service_categories_id_fk": {
          "name": "appointments_categoryId_service_categories_id_fk",
          "tableFrom": "appointments",
          "tableTo": "service_categories",
          "columnsFrom": ["categoryId"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "appointments_stylistId_stylists_id_fk": {
          "name": "appointments_stylistId_stylists_id_fk",
          "tableFrom": "appointments",
          "tableTo": "stylists",
          "columnsFrom": ["stylistId"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "appointments_userId_users_id_fk": {
          "name": "appointments_userId_users_id_fk",
          "tableFrom": "appointments",
          "tableTo": "users",
          "columnsFrom": ["userId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.conversation_sessions": {
      "name": "conversation_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "chatId": {
          "name": "chatId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'telegram'"
        },
        "context": {
          "name": "context",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::json"
        },
        "lastActivityAt": {
          "name": "lastActivityAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expiresAt": {
          "name": "expiresAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "conversation_sessions_chatId_platform_idx": {
          "name": "conversation_sessions_chatId_platform_idx",
          "columns": [
            {
              "expression": "chatId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "conversation_sessions_expiresAt_idx": {
          "name": "conversation_sessions_expiresAt_idx",
          "columns": [
            {
              "expression": "expiresAt",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.deposits": {
      "name": "deposits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "appointmentId": {
          "name": "appointmentId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customerEmail": {
          "name": "customerEmail",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'SGD'"
        },
        "stripePaymentIntentId": {
          "name": "stripePaymentIntentId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "DepositStatus",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "expiresAt": {
          "name": "expiresAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "paidAt": {
          "name": "paidAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "refundedAt": {
          "name": "refundedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "deposits_appointmentId_idx": {
          "name": "deposits_appointmentId_idx",
          "columns": [
            {
              "expression": "appointmentId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "deposits_status_idx": {
          "name": "deposits_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "deposits_appointmentId_appointments_id_fk": {
          "name": "deposits_appointmentId_appointments_id_fk",
          "tableFrom": "deposits",
          "tableTo": "appointments",
          "columnsFrom": ["appointmentId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "deposits_userId_users_id_fk": {
          "name": "deposits_userId_users_id_fk",
          "tableFrom": "deposits",
          "tableTo": "users",
          "columnsFrom": ["userId"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "deposits_stripePaymentIntentId_unique": {
          "name": "deposits_stripePaymentIntentId_unique",
          "nullsNotDistinct": false,
          "columns": ["stripePaymentIntentId"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.feedback": {
      "name": "feedback",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "appointmentId": {
          "name": "appointmentId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rating": {
          "name": "rating",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "comment": {
          "name": "comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "feedback_appointmentId_appointments_id_fk": {
          "name": "feedback_appointmentId_appointments_id_fk",
          "tableFrom": "feedback",
          "tableTo": "appointments",
          "columnsFrom": ["appointmentId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "feedback_userId_users_id_fk": {
          "name": "feedback_userId_users_id_fk",
          "tableFrom": "feedback",
          "tableTo": "users",
          "columnsFrom": ["userId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "feedback_appointmentId_unique": {
          "name": "feedback_appointmentId_unique",
          "nullsNotDistinct": false,
          "columns": ["appointmentId"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.flagged_conversations": {
      "name": "flagged_conversations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "lastMessage": {
          "name": "lastMessage",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "flaggedAt": {
          "name": "flaggedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "resolvedAt": {
          "name": "resolvedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "isResolved": {
          "name": "isResolved",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "resolvedBy": {
          "name": "resolvedBy",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "flagged_conversations_userId_isResolved_idx": {
          "name": "flagged_conversations_userId_isResolved_idx",
          "columns": [
            {
              "expression": "userId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "isResolved",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "flagged_conversations_isResolved_flaggedAt_idx": {
          "name": "flagged_conversations_isResolved_flaggedAt_idx",
          "columns": [
            {
              "expression": "isResolved",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "flaggedAt",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.knowledge_base": {
      "name": "knowledge_base",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "question": {
          "name": "question",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "answer": {
          "name": "answer",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::json"
        },
        "embedding": {
          "name": "embedding",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "knowledge_base_question_idx": {
          "name": "knowledge_base_question_idx",
          "columns": [
            {
              "expression": "question",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.login_tokens": {
      "name": "login_tokens",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expiresAt": {
          "name": "expiresAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "login_tokens_userId_idx": {
          "name": "login_tokens_userId_idx",
          "columns": [
            {
              "expression": "userId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "login_tokens_userId_users_id_fk": {
          "name": "login_tokens_userId_users_id_fk",
          "tableFrom": "login_tokens",
          "tableTo": "users",
          "columnsFrom": ["userId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "login_tokens_token_unique": {
          "name": "login_tokens_token_unique",
          "nullsNotDistinct": false,
          "columns": ["token"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.retention_messages": {
      "name": "retention_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "messageType": {
          "name": "messageType",
          "type": "RetentionMessageType",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "daysSinceLastVisit": {
          "name": "daysSinceLastVisit",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "sentAt": {
          "name": "sentAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deliveryStatus": {
          "name": "deliveryStatus",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "deliveryError": {
          "name": "deliveryError",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "retention_messages_userId_users_id_fk": {
          "name": "retention_messages_userId_users_id_fk",
          "tableFrom": "retention_messages",
          "tableTo": "users",
          "columnsFrom": ["userId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.service_addons": {
      "name": "service_addons",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "benefits": {
          "name": "benefits",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "ARRAY[]::text[]"
        },
        "price": {
          "name": "price",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "basePrice": {
          "name": "basePrice",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "isRecommended": {
          "name": "isRecommended",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "isPopular": {
          "name": "isPopular",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "serviceId": {
          "name": "serviceId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "service_addons_serviceId_services_id_fk": {
          "name": "service_addons_serviceId_services_id_fk",
          "tableFrom": "service_addons",
          "tableTo": "services",
          "columnsFrom": ["serviceId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.service_categories": {
      "name": "service_categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "shortTitle": {
          "name": "shortTitle",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "priceRangeMin": {
          "name": "priceRangeMin",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "priceRangeMax": {
          "name": "priceRangeMax",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "priceNote": {
          "name": "priceNote",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "estimatedDuration": {
          "name": "estimatedDuration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "sortOrder": {
          "name": "sortOrder",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "isFeatured": {
          "name": "isFeatured",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "imageUrl": {
          "name": "imageUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "illustrationUrl": {
          "name": "illustrationUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "service_categories_slug_unique": {
          "name": "service_categories_slug_unique",
          "nullsNotDistinct": false,
          "columns": ["slug"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.service_tag_relations": {
      "name": "service_tag_relations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "serviceId": {
          "name": "serviceId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tagId": {
          "name": "tagId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "service_tag_relations_serviceId_idx": {
          "name": "service_tag_relations_serviceId_idx",
          "columns": [
            {
              "expression": "serviceId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "service_tag_relations_tagId_idx": {
          "name": "service_tag_relations_tagId_idx",
          "columns": [
            {
              "expression": "tagId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "service_tag_relations_serviceId_services_id_fk": {
          "name": "service_tag_relations_serviceId_services_id_fk",
          "tableFrom": "service_tag_relations",
          "tableTo": "services",
          "columnsFrom": ["serviceId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "service_tag_relations_tagId_service_tags_id_fk": {
          "name": "service_tag_relations_tagId_service_tags_id_fk",
          "tableFrom": "service_tag_relations",
          "tableTo": "service_tags",
          "columnsFrom": ["tagId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "service_tag_relations_serviceId_tagId_unique": {
          "name": "service_tag_relations_serviceId_tagId_unique",
          "nullsNotDistinct": false,
          "columns": ["serviceId", "tagId"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.service_tags": {
      "name": "service_tags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "TagCategory",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "iconName": {
          "name": "iconName",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sortOrder": {
          "name": "sortOrder",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "service_tags_category_idx": {
          "name": "service_tags_category_idx",
          "columns": [
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "service_tags_slug_unique": {
          "name": "service_tags_slug_unique",
          "nullsNotDistinct": false,
          "columns": ["slug"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.services": {
      "name": "services",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "price": {
          "name": "price",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "basePrice": {
          "name": "basePrice",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "maxPrice": {
          "name": "maxPrice",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "processingWaitTime": {
          "name": "processingWaitTime",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "processingDuration": {
          "name": "processingDuration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "imageUrl": {
          "name": "imageUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "popularityScore": {
          "name": "popularityScore",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "tags": {
          "name": "tags",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::json"
        },
        "categoryId": {
          "name": "categoryId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "isActive": {
          "name": "isActive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "services_categoryId_service_categories_id_fk": {
          "name": "services_categoryId_service_categories_id_fk",
          "tableFrom": "services",
          "tableTo": "service_categories",
          "columnsFrom": ["categoryId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.stylists": {
      "name": "stylists",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bio": {
          "name": "bio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar": {
          "name": "avatar",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "specialties": {
          "name": "specialties",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "workingHours": {
          "name": "workingHours",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "blockedDates": {
          "name": "blockedDates",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::json"
        },
        "isActive": {
          "name": "isActive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "googleAccessToken": {
          "name": "googleAccessToken",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "googleRefreshToken": {
          "name": "googleRefreshToken",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "googleTokenExpiry": {
          "name": "googleTokenExpiry",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "googleCalendarId": {
          "name": "googleCalendarId",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "googleEmail": {
          "name": "googleEmail",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "googleTokenInvalid": {
          "name": "googleTokenInvalid",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "lastCalendarReminderSent": {
          "name": "lastCalendarReminderSent",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "stylists_userId_users_id_fk": {
          "name": "stylists_userId_users_id_fk",
          "tableFrom": "stylists",
          "tableTo": "users",
          "columnsFrom": ["userId"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "stylists_userId_unique": {
          "name": "stylists_userId_unique",
          "nullsNotDistinct": false,
          "columns": ["userId"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "password": {
          "name": "password",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "roles": {
          "name": "roles",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"CUSTOMER\"}'"
        },
        "authProvider": {
          "name": "authProvider",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "telegramId": {
          "name": "telegramId",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "whatsappPhone": {
          "name": "whatsappPhone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar": {
          "name": "avatar",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "lastVisitDate": {
          "name": "lastVisitDate",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "totalVisits": {
          "name": "totalVisits",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "lastRetentionMessageSent": {
          "name": "lastRetentionMessageSent",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "users_whatsappPhone_idx": {
          "name": "users_whatsappPhone_idx",
          "columns": [
            {
              "expression": "whatsappPhone",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": ["email"]
        },
        "users_telegramId_unique": {
          "name": "users_telegramId_unique",
          "nullsNotDistinct": false,
          "columns": ["telegramId"]
        },
        "users_whatsappPhone_unique": {
          "name": "users_whatsappPhone_unique",
          "nullsNotDistinct": false,
          "columns": ["whatsappPhone"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.AppointmentStatus": {
      "name": "AppointmentStatus",
      "schema": "public",
      "values": ["SCHEDULED", "COMPLETED", "CANCELLED", "NO_SHOW"]
    },
    "public.BookingSource": {
      "name": "BookingSource",
      "schema": "public",
      "values": ["WEB", "TELEGRAM", "WHATSAPP"]
    },
    "public.DepositStatus": {
      "name": "DepositStatus",
      "schema": "public",
      "values": ["PENDING", "PAID", "REFUNDED", "FORFEITED"]
    },
    "public.RetentionMessageType": {
      "name": "RetentionMessageType",
      "schema": "public",
      "values": ["FEEDBACK_REQUEST", "REBOOKING_NUDGE", "WIN_BACK"]
    },
    "public.Role": {
      "name": "Role",
      "schema": "public",
      "values": ["CUSTOMER", "STYLIST", "ADMIN"]
    },
    "public.TagCategory": {
      "name": "TagCategory",
      "schema": "public",
      "values": ["CONCERN", "OUTCOME", "HAIR_TYPE"]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
