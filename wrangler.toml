# Cloudflare Workers configuration
# See: https://developers.cloudflare.com/workers/

name = "hair-salon-app"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat_v2"]

# Main entry point for OpenNext
main = ".open-next/worker.js"
assets = { directory = ".open-next/assets", binding = "ASSETS" }

# Non-sensitive environment variables
[vars]
# Add non-secret env vars here if needed
NEXTAUTH_URL = "https://hair-salon-app.chrenelias.workers.dev"

# Hyperdrive configuration for Neon PostgreSQL
# After running: wrangler hyperdrive create hair-salon-db --connection-string="<NEON_URL>"
# Replace <HYPERDRIVE_ID> with the ID from the output
[[hyperdrive]]
binding = "HYPERDRIVE"
id = "7962078c09bd4259923ab2e753279dde"

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true